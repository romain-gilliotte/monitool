<ol class="breadcrumb">
	<li><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li class="active" title="{{$ctrl.project.country}}" ng-bind="$ctrl.project.country|maxLength:20"></li>
	<li class="active" title="{{$ctrl.project.name}}" ng-bind="$ctrl.project.name|maxLength:50"></li>
	<li class="active" translate="project.pivot_table"></li>
</ol>

<query-computation project="$ctrl.project" on-update="$ctrl.onBaseQueryUpdated(query, baseline, target, colorize)">
</query-computation>

<div ng-if="!$ctrl.baseQuery" translate="project.indicator_computation_missing"></div>
<div ng-if="$ctrl.baseQuery">
	<olap-dimensions project="$ctrl.project" query="$ctrl.baseQuery"
		on-update="$ctrl.onAggregateUpdated(aggregate, distribution, showTotals)">
	</olap-dimensions>

	<indicator-filter project="$ctrl.project" query="$ctrl.baseQuery" on-update="$ctrl.onDiceUpdated(dices)">
	</indicator-filter>

	<div ng-if="$ctrl.baseline !== null && $ctrl.target !== null">
		<span ng-if="$ctrl.baseline !== null">
			Baseline: {{$ctrl.baseline}}{{$ctrl.query.formula|indicatorUnit}}
		</span>
		<span ng-if="$ctrl.target !== null">
			Target: {{$ctrl.target}}{{$ctrl.query.formula|indicatorUnit}}
		</span>
	</div>

	<span ng-if="$ctrl.errorMessage">{{$ctrl.errorMessage|translate}}</span>
	<olap-grid ng-if="!$ctrl.errorMessage" project="$ctrl.project" query="$ctrl.query" distribution="$ctrl.distribution"
		show-totals="$ctrl.showTotals" data="$ctrl.data" colorize="$ctrl.colorize" baseline="$ctrl.baseline"
		target="$ctrl.target"></olap-grid>
</div>